{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/hooks/useApi.ts"],"sourcesContent":["'use client';\n\nimport { useAuth } from '../context/AuthContext';\n\nexport const useApi = () => {\n  const { token } = useAuth();\n\n  const get = async (url: string) => {\n    try {\n      const response = await fetch(url, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json().catch(() => null);\n      if (!response.ok) {\n        let message = 'Request failed';\n        if (response.status === 401) message = 'Unauthorized';\n        return { data, ok: false, status: response.status, error: message };\n      }\n\n      return { data, ok: true, status: response.status };\n    } catch (error) {\n      console.error('GET error:', error);\n      return { data: null, ok: false, status: 0, error: 'Network error' };\n    }\n  };\n\n  const post = async (url: string, body: unknown) => {\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(body),\n      });\n\n      const data = await response.json().catch(() => null);\n      if (!response.ok) {\n        let message = 'Request failed';\n        if (response.status === 401) message = 'Unauthorized';\n        return { data, ok: false, status: response.status, error: message };\n      }\n\n      return { data, ok: true, status: response.status };\n    } catch (error) {\n      console.error('POST error:', error);\n      return { data: null, ok: false, status: 0, error: 'Network error' };\n    }\n  };\n\n  return { get, post };\n};\n"],"names":[],"mappings":";;;AAEA;;AAFA;;AAIO,MAAM,SAAS;;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAExB,MAAM,MAAM,OAAO;QACjB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,KAAK;gBAChC,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;YAC/C,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,IAAI,UAAU;gBACd,IAAI,SAAS,MAAM,KAAK,KAAK,UAAU;gBACvC,OAAO;oBAAE;oBAAM,IAAI;oBAAO,QAAQ,SAAS,MAAM;oBAAE,OAAO;gBAAQ;YACpE;YAEA,OAAO;gBAAE;gBAAM,IAAI;gBAAM,QAAQ,SAAS,MAAM;YAAC;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,OAAO;gBAAE,MAAM;gBAAM,IAAI;gBAAO,QAAQ;gBAAG,OAAO;YAAgB;QACpE;IACF;IAEA,MAAM,OAAO,OAAO,KAAa;QAC/B,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,KAAK;gBAChC,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;YAC/C,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,IAAI,UAAU;gBACd,IAAI,SAAS,MAAM,KAAK,KAAK,UAAU;gBACvC,OAAO;oBAAE;oBAAM,IAAI;oBAAO,QAAQ,SAAS,MAAM;oBAAE,OAAO;gBAAQ;YACpE;YAEA,OAAO;gBAAE;gBAAM,IAAI;gBAAM,QAAQ,SAAS,MAAM;YAAC;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,eAAe;YAC7B,OAAO;gBAAE,MAAM;gBAAM,IAAI;gBAAO,QAAQ;gBAAG,OAAO;YAAgB;QACpE;IACF;IAEA,OAAO;QAAE;QAAK;IAAK;AACrB;GAnDa;;QACO,wIAAA,CAAA,UAAO","debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/hooks/useProtectedRoute.ts"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/app/context/AuthContext';\n\n/**\n * Hook para proteger rutas.\n * \n * @param allowedRoles array de roles permitidos (por ejemplo: ['USER', 'MODERATOR'])\n */\nexport const useProtectedRoute = (allowedRoles: string[]) => {\n  const { token, role, isInitialized } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!isInitialized) return;\n\n    if (!token) {\n      // Si no estÃ¡ autenticado â†’ redirect a login\n      router.push('/login');\n    } else if (!allowedRoles.includes(role)) {\n      // Si no tiene el role adecuado â†’ redirect a contacts\n      router.push('/contacts');\n    }\n    // Si pasa ambas validaciones, se queda en la pÃ¡gina.\n  }, [token, role, isInitialized, router, allowedRoles]);\n};"],"names":[],"mappings":";;;AAEA;AACA;AACA;;AAJA;;;;AAWO,MAAM,oBAAoB,CAAC;;IAChC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAC7C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;uCAAE;YACR,IAAI,CAAC,eAAe;YAEpB,IAAI,CAAC,OAAO;gBACV,4CAA4C;gBAC5C,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,CAAC,aAAa,QAAQ,CAAC,OAAO;gBACvC,qDAAqD;gBACrD,OAAO,IAAI,CAAC;YACd;QACA,qDAAqD;QACvD;sCAAG;QAAC;QAAO;QAAM;QAAe;QAAQ;KAAa;AACvD;GAhBa;;QAC4B,wIAAA,CAAA,UAAO;QAC/B,qIAAA,CAAA,YAAS","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/contacts/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useApi } from '@/app/hooks/useApi';\nimport { useProtectedRoute } from '@/app/hooks/useProtectedRoute';\nimport { useToast } from '../components/ToastProvider';\n\nexport default function ContactsPage() {\n  // ðŸ‘ˆ Proteges esta pÃ¡gina â†’ todos los roles pueden entrar\n  useProtectedRoute(['USER', 'MODERATOR', 'ADMIN']);\n\n  const { get } = useApi();\n  const { showToast } = useToast();\n\n  type Contact = { id: string | number; name: string; email: string };\n\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchContacts = async () => {\n      setIsLoading(true);\n      const { data, ok, error } = await get(\n        `${process.env.NEXT_PUBLIC_API_URL}/contacts`\n      );\n\n      if (ok) {\n        setContacts(data);\n      } else {\n        showToast(error || 'Failed to fetch contacts', 'error');\n      }\n      setIsLoading(false);\n    };\n\n    fetchContacts();\n  }, [get]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 py-10 px-6\">\n      <div className=\"max-w-5xl mx-auto\">\n        <h1 className=\"text-4xl font-bold mb-8 text-center text-gray-800\">Contacts</h1>\n\n        <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n          <table className=\"min-w-full leading-normal\">\n            <thead>\n              <tr>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Name\n                </th>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Email\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {contacts.map((contact) => (\n                <tr key={contact.id} className=\"hover:bg-gray-50 transition-colors\">\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.name}\n                  </td>\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.email}\n                  </td>\n                </tr>\n              ))}\n              {isLoading && (\n                <tr>\n                  <td colSpan={2} className=\"px-5 py-5 border-b text-center\">\n                    <div className=\"mx-auto h-5 w-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin\" />\n                  </td>\n                </tr>\n              )}\n              {!isLoading && contacts.length === 0 && (\n                <tr>\n                  <td\n                    colSpan={2}\n                    className=\"px-5 py-5 border-b text-center text-gray-500\"\n                  >\n                    No contacts found.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;AAuBW;;AArBX;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,0DAA0D;IAC1D,CAAA,GAAA,2IAAA,CAAA,oBAAiB,AAAD,EAAE;QAAC;QAAQ;QAAa;KAAQ;IAEhD,MAAM,EAAE,GAAG,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,SAAM,AAAD;IACrB,MAAM,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,6IAAA,CAAA,WAAQ,AAAD;IAI7B,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM;wDAAgB;oBACpB,aAAa;oBACb,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,IAChC,6DAAmC,SAAS,CAAC;oBAG/C,IAAI,IAAI;wBACN,YAAY;oBACd,OAAO;wBACL,UAAU,SAAS,4BAA4B;oBACjD;oBACA,aAAa;gBACf;;YAEA;QACF;iCAAG;QAAC;KAAI;IAER,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoD;;;;;;8BAElE,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CACC,cAAA,6LAAC;;sDACC,6LAAC;4CAAG,WAAU;sDAAuG;;;;;;sDAGrH,6LAAC;4CAAG,WAAU;sDAAuG;;;;;;;;;;;;;;;;;0CAKzH,6LAAC;;oCACE,SAAS,GAAG,CAAC,CAAC,wBACb,6LAAC;4CAAoB,WAAU;;8DAC7B,6LAAC;oDAAG,WAAU;8DACX,QAAQ,IAAI;;;;;;8DAEf,6LAAC;oDAAG,WAAU;8DACX,QAAQ,KAAK;;;;;;;2CALT,QAAQ,EAAE;;;;;oCASpB,2BACC,6LAAC;kDACC,cAAA,6LAAC;4CAAG,SAAS;4CAAG,WAAU;sDACxB,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;;;;;;oCAIpB,CAAC,aAAa,SAAS,MAAM,KAAK,mBACjC,6LAAC;kDACC,cAAA,6LAAC;4CACC,SAAS;4CACT,WAAU;sDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB;GAjFwB;;QAEtB,2IAAA,CAAA,oBAAiB;QAED,gIAAA,CAAA,SAAM;QACA,6IAAA,CAAA,WAAQ;;;KALR","debugId":null}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}