{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/hooks/useApi.ts"],"sourcesContent":["'use client';\n\nimport { useAuth } from '../context/AuthContext';\n\nexport const useApi = () => {\n  const { token } = useAuth();\n\n const get = async (url: string) => {\n  try {\n    const response = await fetch(url, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n    return { data, ok: response.ok };\n  } catch (error) {\n    console.error('GET error:', error);\n    return { data: null, ok: false };\n  }\n};\n\nconst post = async (url: string, body: unknown) => {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(body),\n    });\n\n    const data = await response.json();\n    return { data, ok: response.ok };\n  } catch (error) {\n    console.error('POST error:', error);\n    return { data: null, ok: false };\n  }\n};\n\n  return { get, post };\n};"],"names":[],"mappings":";;;AAEA;;AAFA;;AAIO,MAAM,SAAS;;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAEzB,MAAM,MAAM,OAAO;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,KAAK;gBAChC,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,OAAO;gBAAE;gBAAM,IAAI,SAAS,EAAE;YAAC;QACjC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,OAAO;gBAAE,MAAM;gBAAM,IAAI;YAAM;QACjC;IACF;IAEA,MAAM,OAAO,OAAO,KAAa;QAC/B,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,KAAK;gBAChC,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,OAAO;gBAAE;gBAAM,IAAI,SAAS,EAAE;YAAC;QACjC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,eAAe;YAC7B,OAAO;gBAAE,MAAM;gBAAM,IAAI;YAAM;QACjC;IACF;IAEE,OAAO;QAAE;QAAK;IAAK;AACrB;GAvCa;;QACO,wIAAA,CAAA,UAAO","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/hooks/useProtectedRoute.ts"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/app/context/AuthContext';\n\n/**\n * Hook para proteger rutas.\n * \n * @param allowedRoles array de roles permitidos (por ejemplo: ['USER', 'MODERATOR'])\n */\nexport const useProtectedRoute = (allowedRoles: string[]) => {\n  const { token, role } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!token) {\n      // Si no estÃ¡ autenticado â†’ redirect a login\n      router.push('/login');\n    } else if (!allowedRoles.includes(role)) {\n      // Si no tiene el role adecuado â†’ redirect a contacts\n      router.push('/contacts');\n    }\n    // Si pasa ambas validaciones, se queda en la pÃ¡gina.\n  }, [token, role, router, allowedRoles]);\n};"],"names":[],"mappings":";;;AAEA;AACA;AACA;;AAJA;;;;AAWO,MAAM,oBAAoB,CAAC;;IAChC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAC9B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;uCAAE;YACR,IAAI,CAAC,OAAO;gBACV,4CAA4C;gBAC5C,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,CAAC,aAAa,QAAQ,CAAC,OAAO;gBACvC,qDAAqD;gBACrD,OAAO,IAAI,CAAC;YACd;QACA,qDAAqD;QACvD;sCAAG;QAAC;QAAO;QAAM;QAAQ;KAAa;AACxC;GAda;;QACa,wIAAA,CAAA,UAAO;QAChB,qIAAA,CAAA,YAAS","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/contacts/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useApi } from '@/app/hooks/useApi';\nimport { useProtectedRoute } from '@/app/hooks/useProtectedRoute'; // ðŸ‘ˆ Importas el hook\n\nexport default function ContactsPage() {\n  // ðŸ‘ˆ Proteges esta pÃ¡gina â†’ todos los roles pueden entrar\n  useProtectedRoute(['USER', 'MODERATOR', 'ADMIN']);\n\n  const { get } = useApi();\n\n  type Contact = { id: string | number; name: string; email: string };\n\n  const [contacts, setContacts] = useState<Contact[]>([]);\n\n  useEffect(() => {\n    const fetchContacts = async () => {\n      const { data, ok } = await get('http://localhost:3000/contacts');\n\n      if (ok) {\n        setContacts(data);\n      } else {\n        console.error('Failed to fetch contacts');\n      }\n    };\n\n    fetchContacts();\n  }, [get]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 py-10 px-6\">\n      <div className=\"max-w-5xl mx-auto\">\n        <h1 className=\"text-4xl font-bold mb-8 text-center text-gray-800\">Contacts</h1>\n\n        <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n          <table className=\"min-w-full leading-normal\">\n            <thead>\n              <tr>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Name\n                </th>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Email\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {contacts.map((contact) => (\n                <tr key={contact.id} className=\"hover:bg-gray-50 transition-colors\">\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.name}\n                  </td>\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.email}\n                  </td>\n                </tr>\n              ))}\n              {contacts.length === 0 && (\n                <tr>\n                  <td\n                    colSpan={2}\n                    className=\"px-5 py-5 border-b text-center text-gray-500\"\n                  >\n                    No contacts found.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA,qPAAmE,sBAAsB;;;AAJzF;;;;AAMe,SAAS;;IACtB,0DAA0D;IAC1D,CAAA,GAAA,2IAAA,CAAA,oBAAiB,AAAD,EAAE;QAAC;QAAQ;QAAa;KAAQ;IAEhD,MAAM,EAAE,GAAG,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,SAAM,AAAD;IAIrB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IAEtD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM;wDAAgB;oBACpB,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,MAAM,IAAI;oBAE/B,IAAI,IAAI;wBACN,YAAY;oBACd,OAAO;wBACL,QAAQ,KAAK,CAAC;oBAChB;gBACF;;YAEA;QACF;iCAAG;QAAC;KAAI;IAER,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoD;;;;;;8BAElE,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CACC,cAAA,6LAAC;;sDACC,6LAAC;4CAAG,WAAU;sDAAuG;;;;;;sDAGrH,6LAAC;4CAAG,WAAU;sDAAuG;;;;;;;;;;;;;;;;;0CAKzH,6LAAC;;oCACE,SAAS,GAAG,CAAC,CAAC,wBACb,6LAAC;4CAAoB,WAAU;;8DAC7B,6LAAC;oDAAG,WAAU;8DACX,QAAQ,IAAI;;;;;;8DAEf,6LAAC;oDAAG,WAAU;8DACX,QAAQ,KAAK;;;;;;;2CALT,QAAQ,EAAE;;;;;oCASpB,SAAS,MAAM,KAAK,mBACnB,6LAAC;kDACC,cAAA,6LAAC;4CACC,SAAS;4CACT,WAAU;sDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB;GApEwB;;QAEtB,2IAAA,CAAA,oBAAiB;QAED,gIAAA,CAAA,SAAM;;;KAJA","debugId":null}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}