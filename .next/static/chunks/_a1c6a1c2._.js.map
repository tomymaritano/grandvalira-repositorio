{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/hooks/useApi.ts"],"sourcesContent":["'use client';\n\nimport { useAuth } from '../context/AuthContext';\n\nexport const useApi = () => {\n  const { token } = useAuth();\n\n  const get = async (url: string) => {\n    try {\n      const response = await fetch(url, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json().catch(() => null);\n      if (!response.ok) {\n        let message = 'Request failed';\n        if (response.status === 401) message = 'Unauthorized';\n        return { data, ok: false, status: response.status, error: message };\n      }\n\n      return { data, ok: true, status: response.status };\n    } catch (error) {\n      console.error('GET error:', error);\n      return { data: null, ok: false, status: 0, error: 'Network error' };\n    }\n  };\n\n  const post = async (url: string, body: unknown) => {\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(body),\n      });\n\n      const data = await response.json().catch(() => null);\n      if (!response.ok) {\n        let message = 'Request failed';\n        if (response.status === 401) message = 'Unauthorized';\n        return { data, ok: false, status: response.status, error: message };\n      }\n\n      return { data, ok: true, status: response.status };\n    } catch (error) {\n      console.error('POST error:', error);\n      return { data: null, ok: false, status: 0, error: 'Network error' };\n    }\n  };\n\n  return { get, post };\n};\n"],"names":[],"mappings":";;;AAEA;;AAFA;;AAIO,MAAM,SAAS;;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAExB,MAAM,MAAM,OAAO;QACjB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,KAAK;gBAChC,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;YAC/C,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,IAAI,UAAU;gBACd,IAAI,SAAS,MAAM,KAAK,KAAK,UAAU;gBACvC,OAAO;oBAAE;oBAAM,IAAI;oBAAO,QAAQ,SAAS,MAAM;oBAAE,OAAO;gBAAQ;YACpE;YAEA,OAAO;gBAAE;gBAAM,IAAI;gBAAM,QAAQ,SAAS,MAAM;YAAC;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,OAAO;gBAAE,MAAM;gBAAM,IAAI;gBAAO,QAAQ;gBAAG,OAAO;YAAgB;QACpE;IACF;IAEA,MAAM,OAAO,OAAO,KAAa;QAC/B,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,KAAK;gBAChC,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;YAC/C,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,IAAI,UAAU;gBACd,IAAI,SAAS,MAAM,KAAK,KAAK,UAAU;gBACvC,OAAO;oBAAE;oBAAM,IAAI;oBAAO,QAAQ,SAAS,MAAM;oBAAE,OAAO;gBAAQ;YACpE;YAEA,OAAO;gBAAE;gBAAM,IAAI;gBAAM,QAAQ,SAAS,MAAM;YAAC;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,eAAe;YAC7B,OAAO;gBAAE,MAAM;gBAAM,IAAI;gBAAO,QAAQ;gBAAG,OAAO;YAAgB;QACpE;IACF;IAEA,OAAO;QAAE;QAAK;IAAK;AACrB;GAnDa;;QACO,wIAAA,CAAA,UAAO","debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/hooks/useProtectedRoute.ts"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/app/context/AuthContext';\n\n/**\n * Hook para proteger rutas.\n * \n * @param allowedRoles array de roles permitidos (por ejemplo: ['USER', 'MODERATOR'])\n */\nexport const useProtectedRoute = (allowedRoles: string[]) => {\n  const { token, role } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!token) {\n      // Si no estÃ¡ autenticado â†’ redirect a login\n      router.push('/login');\n    } else if (!allowedRoles.includes(role)) {\n      // Si no tiene el role adecuado â†’ redirect a contacts\n      router.push('/contacts');\n    }\n    // Si pasa ambas validaciones, se queda en la pÃ¡gina.\n  }, [token, role, router, allowedRoles]);\n};"],"names":[],"mappings":";;;AAEA;AACA;AACA;;AAJA;;;;AAWO,MAAM,oBAAoB,CAAC;;IAChC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAC9B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;uCAAE;YACR,IAAI,CAAC,OAAO;gBACV,4CAA4C;gBAC5C,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,CAAC,aAAa,QAAQ,CAAC,OAAO;gBACvC,qDAAqD;gBACrD,OAAO,IAAI,CAAC;YACd;QACA,qDAAqD;QACvD;sCAAG;QAAC;QAAO;QAAM;QAAQ;KAAa;AACxC;GAda;;QACa,wIAAA,CAAA,UAAO;QAChB,qIAAA,CAAA,YAAS","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useApi } from '@/app/hooks/useApi';\nimport { useProtectedRoute } from '@/app/hooks/useProtectedRoute';\nimport { useToast } from '../components/ToastProvider';\n\nexport default function DashboardPage() {\n  useProtectedRoute(['MODERATOR', 'ADMIN']); // ðŸ‘ˆ Solo estos roles pueden entrar\n\n  const { get, post } = useApi();\n  const { showToast } = useToast();\n\n  type Contact = { id: string | number; name: string; email: string; status: string };\n\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchContacts = async () => {\n      setIsLoading(true);\n      const { data, ok, error } = await get('http://localhost:3000/contacts');\n\n      if (ok) {\n        setContacts(data);\n      } else {\n        showToast(error || 'Failed to fetch contacts', 'error');\n      }\n      setIsLoading(false);\n    };\n\n    fetchContacts();\n  }, [get]);\n\n  const handleBanContact = async (contactId: string | number) => {\n    const { ok, error } = await post(\n      `http://localhost:3000/contacts/${contactId}/ban`,\n      {}\n    );\n\n    if (ok) {\n      showToast('Contact banned', 'success');\n      // Refetch contacts\n      const { data } = await get('http://localhost:3000/contacts');\n      setContacts(data);\n    } else {\n      showToast(error || 'Failed to ban contact', 'error');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 py-10 px-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        <h1 className=\"text-4xl font-bold mb-8 text-center text-gray-800\">Contacts Dashboard</h1>\n\n        <div className=\"flex justify-end mb-4\">\n          <button\n            onClick={() => showToast('TODO: Add Contact')}\n            className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors font-semibold\"\n          >\n            + Add Contact\n          </button>\n        </div>\n\n        <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n          <table className=\"min-w-full leading-normal\">\n            <thead>\n              <tr>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Name\n                </th>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Email\n                </th>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-5 py-3 bg-gray-50 border-b text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {contacts.map((contact) => (\n                <tr key={contact.id} className=\"hover:bg-gray-50 transition-colors\">\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.name}\n                  </td>\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.email}\n                  </td>\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700\">\n                    {contact.status}\n                  </td>\n                  <td className=\"px-5 py-5 border-b text-sm text-gray-700 text-center space-x-2\">\n                    <button\n                      onClick={() => showToast('TODO: Edit Contact')}\n                      className=\"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 text-xs\"\n                    >\n                      Edit\n                    </button>\n                    <button\n                      onClick={() => showToast('TODO: Delete Contact')}\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 text-xs\"\n                    >\n                      Delete\n                    </button>\n                    {contact.status !== 'BANNED' && (\n                      <button\n                        onClick={() => handleBanContact(contact.id)}\n                        className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 text-xs\"\n                      >\n                        Ban\n                      </button>\n                    )}\n                  </td>\n                </tr>\n              ))}\n              {isLoading && (\n                <tr>\n                  <td colSpan={4} className=\"px-5 py-5 border-b text-center\">\n                    <div className=\"mx-auto h-5 w-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin\" />\n                  </td>\n                </tr>\n              )}\n              {!isLoading && contacts.length === 0 && (\n                <tr>\n                  <td colSpan={4} className=\"px-5 py-5 border-b text-center text-gray-500\">\n                    No contacts found.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///Users/tomasmaritano/Documents/portfolio/grandvalira-directorio/app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}